# Reading with your child

GenAI applications that catch our application are the ones that has a very fancy use case. However, the best personal value is in cases which make your daily life simpler. Here is one such case.

Spending time with your child and reading to them is invaluable. Especially when they start - in kindergarten and 1st grade. However, busy schedules can make it difficult for parents to read with their kids every day. I have also seen that my accent and specific pronounciations are seaping into how my son reads. While it may be late for use for my own kids, I build a reading buddy that can help kids read along and correct them as needed. It can also check on their understanding of the content they read by asking few questions at the end. 

Not perfect (not even close) in any way. But a good start for someone to build on and mature further. 

This read-along companion listens as children read aloud and gently corrects any misread words or sentences, helping them improve their reading skills even when a parent isn't available.

## Program Features

- **Level 1** – Word-by-Word Assistance: Offers immediate feedback on individual words, aiding in pronunciation and vocabulary building.
- **Level 2** – Sentence-Level Guidance: Focuses on correcting entire sentences, promoting fluency and comprehension as reading skills advance.

This tool integrates smoothly into a child's routine, encouraging independent reading while providing supportive guidance. By offering personalized corrections, it aims to boost confidence and accelerate reading development.

## Updated Features

- **Text Extraction**: Extracts words or sentences from PDF pages using `pytesseract`.
- **Speech Recognition**: Uses Google's speech recognition to verify if the user reads the highlighted text correctly.
- **Highlighting**: Highlights words or sentences on a PDF page as the user progresses.
- **Text-to-Speech Assistance**: If the user incorrectly reads the text, the correct word/sentence is read aloud using Google Text-to-Speech (`gTTS`).
- **Question Generation**: Generates questions based on the content read, using OpenAI's language model, and provides feedback on the answers.
- **User Interface**: Simple UI for selecting reading levels (word-by-word or sentence-by-sentence).
- **Score Display**: Displays the score at the end of the reading session to track progress.

## Dependencies

To run this project, you need to install the following dependencies:

- `pygame`: Used for creating the UI and displaying PDF pages.
- `PyMuPDF (fitz)`: For loading and rendering PDF pages.
- `pytesseract`: For extracting text from images.
- `Pillow (PIL)`: For image processing.
- `pyttsx3`: For text-to-speech (offline option).
- `speech_recognition`: For recognizing the user's speech.
- `gTTS`: For online text-to-speech when the user makes an error.
- `mpg321`: To play audio files generated by `gTTS` (Linux-based systems).
- `openai`: For generating questions and answers using OpenAI's language model.
- `langchain_openai`, `langchain_core`: For using the LangChain framework to integrate advanced LLM features.

Make sure Tesseract is installed and accessible through the specified path in the code.

## Installation

1. Clone the repository:
   ```sh
   git clone <repository-url>
   ```
2. Install the required Python packages:
   ```sh
   pip install pygame PyMuPDF pytesseract Pillow pyttsx3 SpeechRecognition gtts openai langchain_openai langchain_core
   ```
3. Install Tesseract OCR:
   - For macOS (via Homebrew):
     ```sh
     brew install tesseract
     ```
   - For Linux (Ubuntu):
     ```sh
     sudo apt-get install tesseract-ocr
     ```

## Usage

1. Update the Tesseract path in the code if necessary (e.g., `pytesseract.pytesseract_cmd`).
2. Set up your OpenAI API key as an environment variable:
   ```sh
   export OPENAI_API_KEY='your_openai_api_key_here'
   ```
3. Run the program with the desired PDF file:
   ```sh
   python <script_name>.py
   ```
4. Select the reading level when prompted:
   - **Level 1**: Word-by-word highlighting.
   - **Level 2**: Sentence-by-sentence highlighting.
5. The program will display each page of the PDF, highlight text, and listen for the user's spoken response.
6. If the user makes an error, the correct text will be read aloud using `gTTS`.
7. At the end of the session, questions will be generated based on the text content to assess comprehension, and the user's score will be displayed.

## File Structure

- **`TextExtractor`** class: Extracts words and sentences with their coordinates from images.
- **`SpeechRecognizer`** class: Handles speech recognition and similarity checking.
- **`PDFHighlighter`** class: Manages PDF page display, highlighting, question generation, and interaction through speech recognition.

## Notes

- The script uses both `gTTS` and `pyttsx3`. `gTTS` requires internet access and plays the audio using `mpg321` (a Linux command-line tool). Modify the audio playback method if using a different operating system.
- The current Tesseract path in the script is configured for macOS. Update it as per your system configuration.
- The UI is built using `pygame` and is used to display the PDF and handle user input for selecting levels.
- Question generation and answer checking are performed using the OpenAI language model via the LangChain framework.

## License

This project is licensed under the MIT License.

## Contributing

Feel free to submit issues or pull requests if you have suggestions for improvements or find any bugs.

## Author

This project was created by Dheeraj Hegde [Dheeraj.r.hegde@gmail.com](mailto\:Dheeraj.r.hegde@gmail.com). 

